<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GORILLA WARFARE // COMMAND</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@500&display=swap');

        :root {
            --bg-grad-1: #050505;
            --bg-grad-2: #0a0510;
            --card-bg: rgba(20, 20, 25, 0.95);
            --card-border: rgba(255, 255, 255, 0.08);
            --accent: #8b5cf6; /* Vibe Purple */
            --accent-glow: rgba(139, 92, 246, 0.4);
            --text-main: #ffffff;
            --text-dim: #888;
            --green: #10b981;
            --red: #ef4444;
            --font-main: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        /* --- CURSOR FIX --- */
        * { cursor: none !important; } /* FORCE HIDE DEFAULT CURSOR */

        body {
            background: radial-gradient(circle at center, #111 0%, #000 100%);
            color: var(--text-main);
            font-family: var(--font-main);
            margin: 0; height: 100vh; overflow: hidden; display: flex;
        }

        #cursor {
            position: fixed; top: 0; left: 0; 
            width: 4px; height: 4px; /* 4x4 PIXELS */
            background: #ffffff; /* PITCH WHITE */
            pointer-events: none; z-index: 99999;
            box-shadow: 0 0 10px white;
            transform: translate(-50%, -50%);
            mix-blend-mode: difference;
        }

        /* --- LAYOUT --- */
        #sidebar {
            width: 260px; background: rgba(0,0,0,0.5);
            border-right: 1px solid var(--card-border);
            display: flex; flex-direction: column; padding: 30px;
            backdrop-filter: blur(10px);
        }

        #main { flex: 1; padding: 40px; display: flex; flex-direction: column; }

        /* --- ANIMATIONS --- */
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
        @keyframes popIn { 0% { transform: scale(0.9); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

        /* --- COMPONENTS --- */
        .card {
            background: var(--card-bg); border: 1px solid var(--card-border);
            border-radius: 12px; padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            animation: popIn 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .search-bar {
            width: 100%; background: rgba(255,255,255,0.05); border: 1px solid var(--card-border);
            padding: 15px; border-radius: 8px; color: white; font-family: var(--font-main);
            outline: none; margin-bottom: 20px; transition: 0.3s; box-sizing: border-box;
        }
        .search-bar:focus { border-color: var(--accent); box-shadow: 0 0 15px var(--accent-glow); }

        .btn { 
            padding: 10px 20px; border-radius: 6px; border: none; font-weight: 700; 
            transition: 0.2s; text-transform: uppercase; font-size: 0.75em; letter-spacing: 1px; 
        }
        .btn:hover { transform: translateY(-2px); filter: brightness(1.2); }
        .btn-danger { background: var(--red); color: white; box-shadow: 0 0 15px rgba(239, 68, 68, 0.3); }
        .btn-ghost { background: transparent; border: 1px solid var(--card-border); color: #ccc; }
        .btn-ghost:hover { border-color: white; color: white; background: rgba(255,255,255,0.05); }
        .btn-login { width: 100%; background: var(--accent); color: white; padding: 15px; font-size: 1em; }

        /* --- LIST --- */
        .player-row {
            display: flex; align-items: center; justify-content: space-between;
            padding: 18px; margin-bottom: 8px; border-radius: 8px;
            background: rgba(255,255,255,0.02); transition: all 0.2s;
            border: 1px solid transparent; animation: slideIn 0.3s backwards;
        }
        .player-row:hover { background: rgba(255,255,255,0.06); transform: translateX(5px); border-color: var(--accent); }

        .p-info { display: flex; align-items: center; gap: 15px; }
        .p-avatar { 
            width: 45px; height: 45px; 
            background: linear-gradient(135deg, var(--accent), #222); 
            border-radius: 8px; display: flex; align-items: center; justify-content: center; 
            font-weight: 800; font-family: var(--font-mono); border: 1px solid rgba(255,255,255,0.1);
        }
        
        .badge { padding: 5px 10px; border-radius: 4px; font-size: 0.7em; font-weight: 800; letter-spacing: 1px; }
        .b-clean { background: rgba(16, 185, 129, 0.1); color: var(--green); border: 1px solid rgba(16, 185, 129, 0.2); }
        .b-banned { background: rgba(239, 68, 68, 0.1); color: var(--red); border: 1px solid rgba(239, 68, 68, 0.2); }

        /* --- SCREENS --- */
        #login { position: fixed; inset: 0; background: #000; z-index: 50; display: flex; justify-content: center; align-items: center; }
        #modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 100; justify-content: center; align-items: center; backdrop-filter: blur(10px); }
        
    </style>
</head>
<body>
    <div id="cursor"></div>

    <div id="login">
        <div class="card" style="width: 400px; text-align: center; border-top: 4px solid var(--accent);">
            <h1 style="margin-bottom: 5px; font-size: 2.5em; letter-spacing: -2px;">GORILLA <span style="color:var(--accent)">WARFARE</span></h1>
            <p style="color: var(--text-dim); margin-bottom: 30px; font-size: 0.9em; letter-spacing: 2px;">ADMINISTRATION</p>
            
            <input type="text" id="api" value="https://sanctionbanepiconlineservicesystem.onrender.com" class="search-bar" placeholder="Server URL">
            <input type="password" id="pass" class="search-bar" placeholder="Access Key">
            <button onclick="auth()" class="btn btn-login">INITIALIZE</button>
            <p id="msg" style="color:var(--red); margin-top:15px; font-size:0.8em; min-height: 1.2em;"></p>
        </div>
    </div>

    <div id="dashboard" style="display:none; width:100%; height:100%;">
        <div id="sidebar">
            <h2 style="margin-bottom: 40px; color: white; letter-spacing: -1px;">GW <span style="color:var(--accent)">PANEL</span></h2>
            
            <div style="color: var(--text-dim); font-size: 0.75em; margin-bottom: 10px; font-weight: bold; letter-spacing: 1px;">MENU</div>
            <div style="padding: 12px; background: var(--accent); border-radius: 6px; margin-bottom: 5px; color: white; font-weight: 600; font-size: 0.9em; box-shadow: 0 0 15px var(--accent-glow);">Database</div>
            <div style="padding: 12px; color: var(--text-dim); font-size: 0.9em;">Logs</div>
            <div style="padding: 12px; color: var(--text-dim); font-size: 0.9em;">Settings</div>
            
            <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid var(--card-border);">
                <div style="font-size: 0.8em; color: var(--text-dim);">STATUS</div>
                <div style="color: var(--green); font-weight: bold; font-size: 0.9em; margin-top: 5px; text-shadow: 0 0 10px var(--green);">‚óè SECURE CONNECTION</div>
            </div>
        </div>

        <div id="main">
            <div style="display: flex; justify-content: space-between; margin-bottom: 25px; align-items: center;">
                <h1 style="font-size: 2em; letter-spacing: -1px;">Player Database</h1>
                <button onclick="refresh()" class="btn btn-ghost">REFRESH SIGNAL</button>
            </div>

            <div class="card" style="margin-bottom: 20px; padding: 10px; border-left: 4px solid var(--accent);">
                <input type="text" id="search" onkeyup="render()" class="search-bar" style="margin:0; border:none; background: transparent;" placeholder="Search Username or ID...">
            </div>

            <div id="list" style="overflow-y: auto; flex: 1; padding-right: 5px;"></div>
        </div>
    </div>

    <div id="modal">
        <div class="card" style="width: 450px; border: 1px solid var(--red); box-shadow: 0 0 50px rgba(239, 68, 68, 0.2);">
            <h2 style="color:var(--red); margin-bottom: 10px;">SANCTION PLAYER</h2>
            <div style="color:var(--text-dim); margin-bottom: 25px; font-size: 0.9em; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 6px;">Target: <span id="m-target" style="color:white; font-weight:bold;"></span></div>
            
            <input type="text" id="m-reason" class="search-bar" placeholder="Violation Reason">
            <input type="number" id="m-time" class="search-bar" placeholder="Duration (Minutes) - 0 for Perma">
            
            <div style="display: flex; gap: 15px;">
                <button onclick="closeModal()" class="btn btn-ghost" style="flex:1;">CANCEL</button>
                <button onclick="commitBan()" class="btn btn-danger" style="flex:1;">CONFIRM BAN</button>
            </div>
        </div>
    </div>

    <script>
        // --- CUSTOM LERP CURSOR ---
        const c = document.getElementById('cursor');
        let mx = 0, my = 0, cx = 0, cy = 0;
        document.addEventListener('mousemove', e => { mx = e.clientX; my = e.clientY; });
        function loop() {
            cx += (mx - cx) * 0.15; cy += (my - cy) * 0.15;
            c.style.left = cx + 'px'; c.style.top = cy + 'px';
            requestAnimationFrame(loop);
        }
        loop();

        // --- APP LOGIC ---
        let API="", TOKEN="", DB=[], SEL="";

        async function auth() {
            let u = document.getElementById('api').value.replace(/\/$/,"");
            let p = document.getElementById('pass').value;
            try {
                let r = await fetch(u+'/api/players', {headers:{'x-admin-auth':p}});
                if(!r.ok) throw "ACCESS DENIED";
                API=u; TOKEN=p; DB=(await r.json()).players;
                
                document.getElementById('login').style.opacity = 0;
                setTimeout(() => {
                    document.getElementById('login').style.display='none';
                    document.getElementById('dashboard').style.display='flex';
                    render();
                }, 500);
            } catch(e) { document.getElementById('msg').innerText="CONNECTION FAILED"; }
        }

        async function refresh() {
            try {
                let r = await fetch(API+'/api/players', {headers:{'x-admin-auth':TOKEN}});
                DB = (await r.json()).players;
                render();
            } catch(e) { console.error(e); }
        }

        function render() {
            let l=document.getElementById('list'), s=document.getElementById('search').value.toLowerCase();
            l.innerHTML="";
            
            if(DB.length === 0) {
                l.innerHTML = `<div style="text-align:center; color:#555; margin-top:50px; font-family:var(--font-mono);">NO RECORDS FOUND</div>`;
                return;
            }

            DB.filter(p => (p.username||"").toLowerCase().includes(s) || p.productUserId.includes(s)).forEach((p, i) => {
                let div = document.createElement('div');
                div.className = "player-row";
                div.style.animationDelay = (i * 0.05) + "s";
                
                let badge = p.isBanned ? `<span class="badge b-banned">BANNED</span>` : `<span class="badge b-clean">CLEAN</span>`;
                let action = p.isBanned 
                    ? `<button onclick="unban('${p.productUserId}')" class="btn btn-ghost" style="color:var(--green); border-color:var(--green); padding: 8px 12px;">REVOKE</button>`
                    : `<button onclick="openModal('${p.productUserId}', '${p.username}')" class="btn btn-danger" style="padding: 8px 12px;">BAN</button>`;

                div.innerHTML = `
                    <div class="p-info">
                        <div class="p-avatar">${(p.username||"?")[0].toUpperCase()}</div>
                        <div>
                            <div style="font-weight:bold; font-size:1.1em; color:white;">${p.username||"Unknown"}</div>
                            <div style="font-family:monospace; color:var(--text-dim); font-size:0.8em;">${p.productUserId}</div>
                        </div>
                    </div>
                    <div style="display:flex; gap:20px; align-items:center;">
                        <div style="font-size:0.9em; color:var(--text-dim); display:flex; gap:15px; font-family:var(--font-mono);">
                            <span>üí∞ ${p.sheckles||0}</span> <span>‚öôÔ∏è ${p.scrap||0}</span>
                        </div>
                        ${badge}
                        ${action}
                        <button onclick="del('${p.productUserId}')" class="btn btn-ghost" style="padding:8px; width:30px; display:flex; justify-content:center; align-items:center;">‚úï</button>
                    </div>
                `;
                l.appendChild(div);
            });
        }

        function openModal(id, name) { SEL=id; document.getElementById('m-target').innerText=name; document.getElementById('modal').style.display='flex'; }
        function closeModal() { document.getElementById('modal').style.display='none'; }

        async function commitBan() {
            let r = document.getElementById('m-reason').value;
            let m = document.getElementById('m-time').value;
            await fetch(API+'/api/ban', {
                method:'POST', headers:{'Content-Type':'application/json','x-admin-auth':TOKEN},
                body:JSON.stringify({productUserId:SEL, reason:r, durationMinutes:m})
            });
            closeModal(); refresh();
        }

        async function unban(id) {
            if(confirm("Confirm Revoke?")) {
                await fetch(API+'/api/unban', {method:'POST', headers:{'Content-Type':'application/json','x-admin-auth':TOKEN}, body:JSON.stringify({productUserId:id})});
                refresh();
            }
        }
        
        async function del(id) {
            if(confirm("‚ö† PERMANENTLY DELETE RECORD?")) {
                await fetch(API+'/api/delete', {method:'POST', headers:{'Content-Type':'application/json','x-admin-auth':TOKEN}, body:JSON.stringify({productUserId:id})});
                refresh();
            }
        }
    </script>
</body>
</html>
